# **DTP Map**

**DTP Map** — это backend-сервис на **Python + Flask**, предназначенный для обработки и отображения данных о ДТП (дорожно-транспортных происшествиях). Проект работает с CSV-файлами, обрабатывает их и предоставляет API для взаимодействия.

## **Структура проекта**
/opt/dtp_map_backend
├── app                # Основное приложение (Flask)  
│   ├── __init__.py    # Инициализация приложения  
│   ├── routes_dict.py # Маршруты для словарей  
│   ├── routes_dtp.py  # Маршруты для данных о ДТП  
│   └── routes_objects.py # Маршруты для объектов  
├── config             # Конфигурация проекта  
│   ├── config.py      # Параметры Flask  
│   └── gunicorn.conf.py # Конфигурация Gunicorn  
├── data               # Данные проекта  
│   ├── dict           # CSV-файлы со словарями  
│   ├── dtp            # Данные ДТП  
│   └── objects        # Данные объектов  
├── logs               # Логи Gunicorn  
├── parsers            # Парсеры для обработки данных  
│   ├── dtp_parser.py      # Парсер для ДТП  
│   └── objects_parser.py  # Парсер для объектов  
├── static             # Swagger-документация  
├── venv               # Виртуальное окружение  
├── requirements.txt   # Зависимости проекта  
├── run.sh             # Скрипт запуска  
├── wsgi.py            # WSGI-обработчик для Gunicorn  
└── README.md          # Документация  

## **Запуск проекта**
### Установка зависимостей:  
```bash
source venv/bin/activate
pip install -r requirements.txt  
```

### Запуск сервера (локально):
```
gunicorn -c config/gunicorn.conf.py wsgi:app
```

## **API эндпоинты**
/dtp/api/dtp — получение данных о ДТП  
/dtp/api/objects — получение данных об объектах  
/dtp/api/dict — получение справочной информации  
/dtp/api/docs - получение информации о маршрутах (Swagger)  

## **Конфигурация**
Основные параметры хранятся в config/config.py  
Логи Gunicorn записываются в logs/gunicorn.log  
Swagger-документация расположена в static/swagger.yaml  

## **Формат данных**
В этой версии проект работает с CSV-файлами, содержащими информацию о ДТП, объектах и словарях.  
Файлы располагаются в:  
/data/dtp — данные о ДТП  
/data/objects — данные об объектах  
/data/dict — словари (например, нарушения, типы ДТП)  

## **Основные зависимости**
Flask==3.1.0 — веб-фреймворк  
gunicorn==23.0.0 — WSGI-сервер для продакшена  
flask-cors==5.0.1 — поддержка CORS в Flask  
flask-swagger-ui==4.11.1 — интеграция Swagger UI  
pandas==2.2.3 — обработка данных CSV  
python-dotenv==1.0.1 — переменные окружения из .env  

## **Дополнительно**
### **Nginx**
Для работы в продакшене проект должен быть запущен через Nginx в качестве реверс-прокси, который будет перенаправлять запросы на Gunicorn.

### **Развертка**
Проект управляется как сервис. Возможен вариант с использованием Docker.